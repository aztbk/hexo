---
abbrlink: 301gh
categories:
- - 301转发
cover: https://picgo91.cdn456.eu.org/20251023164629988.jpeg
date: '2025-10-23T16:14:58.571+08:00'
layout: post
message: 欢迎来到我的博客，请输入密码以阅读。
password: '@XNGOD'
tags: []
title: 301转发更换中间域名方法
top_img: https://picgo91.cdn456.eu.org/20251023164629988.jpeg
updated: '2025-10-23T16:14:58.571+08:00'
wrong_pass_message: 密码错误请重新输入
---
# 301转发更换中间域名方法

## 主控：

### 开通端口：

TCP：46378 46379 111 3600 22 25 8899 

UDP：737 68 111 323

### 运行：

```
setenforce 0; chmod +x setup && ./setup
```

```
[root@VM-TYO1-RX9AA62WS9 ~]# setenforce 0; chmod +x setup && ./setup
setenforce: SELinux is disabled
开始执行 验证授权
结束执行 验证授权 【成功】
配置文件已存在！是否重写配置文件？[Yes/No] Default:No  yes
请先填写转发的相关信息
其中包括：域名、转发端口、管理端口、是否启用https
【以上配置需要与转发程序信息相一致】
主机域名，多个以,分隔: htcdnnew.bbin888865620.com,mngot.anmnnoe1.com
转发端口: 3600
管理端口: 8899
```

到时候看你要先设置几个域名就填几个域名，中间用“,"隔开。

这边就按照指添加一个`mngot.anmnnoe1.com`

接下去安装的时候加入的证书为：`htcdnnew.bbin888865620.com`这个的证书。

### 修改nginx.conf

#### 文件地址：

修改配置文件`etc/nginx/nginx.conf`大约在40行

```
sudo vim /etc/nginx/nginx.conf
```

```
    # redirect port
    server {
        listen       3600 ssl;
        server_name  mngot.anmnnoe1.com;

        ssl_certificate      fullchain.crt;
        ssl_certificate_key  private.key;

        ssl_session_cache    shared:SSL:1m;
        ssl_session_timeout  5m;

        ssl_ciphers  HIGH:!aNULL:!MD5;
        ssl_prefer_server_ciphers  on;

        root   /opt/gfw/backend/;

        location = / {
               proxy_pass http://backend;
               proxy_set_header Host $host:$server_port;
               proxy_set_header X-Real-IP $remote_addr;
               proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
         }
    }
```

保存后退出。

#### 检测是否正确

```
sudo nginx -t
```

#### 重新加载配置

```
sudo nginx -s reload
```

#### 拷贝证书：

证书名字一定是：`private.key`和`fullchain.crt`

存放地址：`/etc/nginx/`

## 节点


### 开通端口：

TCP：443 80 8989 111 22

UDP：68 111 792

### 运行：

```
setenforce 0; chmod +x setup && ./setup
```

重新安装，把中间域名改成你的中间域名。
